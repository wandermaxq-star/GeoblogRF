# FASADE_ROAD ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ —Ñ–æ–∫—É—Å–∞: —Ñ–∞—Å–∞–¥ (MapContextFacade) –∏ –æ–±—Ö–æ–¥—ã —Ñ–∞—Å–∞–¥–∞

üìå –ö—Ä–∞—Ç–∫–æ: –¥–æ–∫—É–º–µ–Ω—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–æ–∫—É—Å —Ç–µ–ø–µ—Ä—å –Ω–∞ –º–µ—Å—Ç–∞—Ö, –≥–¥–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –æ–±—Ö–æ–¥–∏—Ç `MapContextFacade` (components / utils / —Ç–µ—Å—Ç—ã –Ω–∞–ø—Ä—è–º—É—é –æ–±—Ä–∞—â–∞—é—Ç—Å—è –∫ `mapInstance`, `INTERNAL` –∏–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç Leaflet). –ì–ª—É–±–æ–∫–∏–π –∞—É–¥–∏—Ç GPS‚Äë—Ç—Ä–µ–∫–µ—Ä–∞ **–≤–Ω–µ** —ç—Ç–æ–≥–æ –æ—Ç—á—ë—Ç–∞ (—Ç—Ä–µ–∫–µ—Ä—ã ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑). –í —ç—Ç–æ–º —Ñ–∞–π–ª–µ ‚Äî —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Ç—Ä–µ–∫–∏–Ω–≥–∞ —á–µ—Ä–µ–∑ —Ñ–∞—Å–∞–¥ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ —Ñ–∞—Å–∞–¥ –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞). –ù–∏–∫–∞–∫–∏—Ö –ø—Ä–∞–≤–æ–∫ –≤ –∫–æ–¥–µ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–ª.

---

## 1. –û–±—ä—ë–º –∞–Ω–∞–ª–∏–∑–∞ ‚úÖ
- –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã: `src/services/map_facade/MapContextFacade.ts`, `src/services/map_facade/index.ts`, `src/services/map_facade/IMapRenderer.ts`, –∞–¥–∞–ø—Ç–µ—Ä—ã (`OSMMapRenderer`, `OfflineOSMRenderer`, `YandexPlannerRenderer`), –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ –∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥‚Äë–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ–±—Ä–∞—â–∞—é—Ç—Å—è –∫ –∫–∞—Ä—Ç–µ –Ω–∞–ø—Ä—è–º—É—é (`Map.tsx`, `Planner.tsx`, `mapUtils.ts` –∏ —Ç.–¥.).
- –§–æ–∫—É—Å —Ç–µ–ø–µ—Ä—å: –≤—ã—è–≤–∏—Ç—å –≤—Å–µ –º–µ—Å—Ç–∞, –≥–¥–µ –∫–æ–¥ –Ω–µ –∏–¥—ë—Ç —á–µ—Ä–µ–∑ —Ñ–∞—Å–∞–¥ (bypass), –æ—Ü–µ–Ω–∏—Ç—å —Ä–∏—Å–∫ –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∑–∞—â–∏—Ç–Ω—ã–µ –º–µ—Ä—ã (lint, —Ç–µ—Å—Ç—ã, API‚Äë–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è).

---

## 2. –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ–∑—é–º–µ (—Ñ–∞—Å–∞–¥‚Äë–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π) üî•
- P0 ‚Äî Facade bypass: –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–æ–¥—É–ª–µ–π –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –Ω–∞–ø—Ä—è–º—É—é –∏—Å–ø–æ–ª—å–∑—É—é—Ç map instance / renderer internals (`mapFacade().getMap()`, `INTERNAL.api.mapInstance`, –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ `mapInstance` –∏–ª–∏ –∫ Leaflet). –≠—Ç–æ —Ä—É—à–∏—Ç –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã —Ñ–∞—Å–∞–¥–∞ –∏ —É—Å–ª–æ–∂–Ω—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –µ–¥–∏–Ω–æ–π —Ç–æ—á–∫–∏ –∫–æ–Ω—Ç—Ä–æ–ª—è. (—Å–º. —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –Ω–∏–∂–µ)
- P0 ‚Äî API gap: `highlightEventOnMap` –æ–±—ä—è–≤–ª–µ–Ω –≤ —Ñ–∞—Å–∞–¥–µ, –Ω–æ —Ä–µ–Ω–¥–µ—Ä–µ—Ä—ã –Ω–µ —Ä–µ–∞–ª–∏–∑—É—é—Ç `highlightEvent` ‚Äî —ç—Ñ—Ñ–µ–∫—Ç: –≤—ã–∑–æ–≤—ã —Ñ–∞—Å–∞–¥–∞ –Ω–µ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –æ–∂–∏–¥–∞–µ–º–æ–º—É UI‚Äë–ø–æ–≤–µ–¥–µ–Ω–∏—é.
- P1 ‚Äî `externalMarkers` / pending flow: –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –≤–æ–∑–º–æ–∂–Ω—ã–µ race conditions –ø—Ä–∏ init/switch.

---

## 3. –ì–¥–µ –∫–æ–¥ –æ–±—Ö–æ–¥–∏—Ç—Å—è –º–∏–º–æ —Ñ–∞—Å–∞–¥–∞ ‚Äî –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∏ –≤–ª–∏—è–Ω–∏–µ ‚ö†Ô∏è
–ù–∞–π–¥–µ–Ω–æ –ø—Ä—è–º–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ ¬´–≤–Ω—É—Ç—Ä–µ–Ω–Ω–æ—Å—Ç—è–º¬ª –∫–∞—Ä—Ç—ã (–Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–º–µ–Ω–∏—Ç—å —Ä–µ–Ω–¥–µ—Ä–µ—Ä –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å offline‚Äë–ø–æ–≤–µ–¥–µ–Ω–∏–µ):
- `frontend/src/pages/Map.tsx` ‚Äî `mapFacade().getMap()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é.
- `frontend/src/pages/Planner.tsx` ‚Äî –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ `mapApi?.map || mapApi?.mapInstance`.
- `frontend/src/pages/OfflineMapTest.tsx` ‚Äî –¥–æ—Å—Ç—É–ø –∫ `(renderer as any).map || (renderer as any).mapInstance`.
- `frontend/src/components/Map/mapUtils.ts` ‚Äî helper –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `mapFacadeOrInstance` –∏ –¥–æ–ø—É—Å–∫–∞–µ—Ç –ø–µ—Ä–µ–¥–∞—á—É –∏–Ω—Å—Ç–∞–Ω—Å–∞ –Ω–∞–ø—Ä—è–º—É—é.
- –¢–µ—Å—Ç—ã/–º–æ–¥—É–ª–∏ —Å –ø—Ä—è–º—ã–º import Leaflet: `leafletInit.ts` (—Å–º. –¥–æ–ø—É—Å—Ç–∏–º–æ), –∞–¥–∞–ø—Ç–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `import L from 'leaflet'` (OK) ‚Äî –Ω–æ –≤ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –∏–º–ø–æ—Ä—Ç Leaflet –Ω–µ –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–ª—è—Ç—å—Å—è.
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `INTERNAL.api`/`INTERNAL.externalMarkers` –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ –≤ —Å–≤—è–∑–∫–µ `map_facade/index.ts` –∏ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö —á–µ—Ä–µ–∑ `mapFacade().getRegisteredApi()` / `getMap()`.

–í–ª–∏—è–Ω–∏–µ:
- –û–±—Ö–æ–¥ —Ñ–∞—Å–∞–¥–∞ –¥–µ–ª–∞–µ—Ç –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ–π –≥–∞—Ä–∞–Ω—Ç–∏—é, —á—Ç–æ –≤—Å–µ –≤—ã–∑–æ–≤—ã –ø—Ä–æ–π–¥—É—Ç —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π –∫–æ–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É—á—ë—Ç offline/online, —Ç—Ä–µ–∫–∏–Ω–≥, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, gamification). –≠—Ç–æ –ø–æ–≤—ã—à–∞–µ—Ç —Ä–∏—Å–∫ —Ä–µ–≥—Ä–µ—Å—Å–∏–π –ø—Ä–∏ —Å–º–µ–Ω–µ —Ä–µ–Ω–¥–µ—Ä–µ—Ä–∞ –∏ –º–µ—à–∞–µ—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—é –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞/–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è (–∫–æ—Ä–æ—Ç–∫–æ): –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –ø—Ä—è–º—ã–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ `mapInstance`/`INTERNAL` –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏, –ø–æ–∑–≤–æ–ª–∏—Ç—å —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `MapContextFacade` –∏ –∞–¥–∞–ø—Ç–µ—Ä—ã.

---

## 4. –¢—Ä–µ–∫–µ—Ä—ã (GPS) ‚Äî —á—Ç–æ –ø–æ –Ω–∏–º –≥–æ–≤–æ—Ä–∏—Ç —Ñ–∞—Å–∞–¥ —Å–µ–π—á–∞—Å
- –ù–∞–±–ª—é–¥–µ–Ω–∏–µ: –ø—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Ç—Ä–µ–∫–∏–Ω–≥–∞ (`startTracking`, `stopTracking`) **—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ —Ñ–∞—Å–∞–¥** –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Map.tsx` –≤—ã–∑—ã–≤–∞–µ—Ç `mapFacade().startTracking()` / `stopTracking()`). –≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã ‚Äî —Ñ–∞—Å–∞–¥ —Å–ª—É–∂–∏—Ç –µ–¥–∏–Ω–æ–π —Ç–æ—á–∫–æ–π –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç—Ä–µ–∫–∏–Ω–≥—É.
- –°—Ç—Ä–æ–≥–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ: –≤ —Ä–µ–ø–æ –µ—Å—Ç—å –∏ –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã Geolocation API –¥–ª—è ¬´–æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–≥–æ¬ª –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `locationService.ts`, `CreatePostModal.tsx`), ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, –Ω–æ –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ–ª–Ω—É—é —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—é ‚Äî –∏—Ö —Ç–æ–∂–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∑–∞ —Ñ–∞—Å–∞–¥.
- –í—ã–≤–æ–¥: –≥–ª—É–±–æ–∫–∏–π –∞—É–¥–∏—Ç –ª–æ–≥–∏–∫–∏ –∑–∞–ø–∏—Å–∏/—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç—Ä–µ–∫–æ–≤ –æ—Å—Ç–∞—ë—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ–π –∑–∞–¥–∞—á–µ–π (TRACKER_ROAD). –í —Ç–µ–∫—É—â–µ–º —Ñ–∞—Å–∞–¥‚Äë–∞—É–¥–∏—Ç–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ç—Ä–µ–∫–∏–Ω–≥‚Äë—Ç–æ—á–∫–∏ –≤—Å–µ–≥–¥–∞ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ —Ñ–∞—Å–∞–¥ (–≤ —Ç–µ–∫—É—â–µ–º –∫–æ–¥–µ ‚Äî –¥–∞, –æ—Å–Ω–æ–≤–Ω—ã–µ –≤—ã–∑–æ–≤—ã –∏–¥—É—Ç —á–µ—Ä–µ–∑ —Ñ–∞—Å–∞–¥).

---

## 5. –¢–µ—Å—Ç—ã –∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å (—Ñ–æ–∫—É—Å: –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –æ–±—Ö–æ–¥ —Ñ–∞—Å–∞–¥–∞) üß™
- ESLint (rule): –∑–∞–ø—Ä–µ—Ç –∏–º–ø–æ—Ä—Ç–∞ `leaflet` –≤–Ω–µ `src/services/map_facade/adapters` –∏ `src/utils/leafletInit.ts`.
- Unit test (code‚Äëscan): fail if any file (–∏—Å–∫–ª—é—á–∞—è –∞–¥–∞–ø—Ç–µ—Ä—ã –∏ —É—Ç–∏–ª–∏—Ç—ã) —Å–æ–¥–µ—Ä–∂–∏—Ç `getMap\(|\.mapInstance\b|INTERNAL\.api|import\s+L\s+from\s+'leaflet'`.
- Unit test: `mapFacade.getMap()` –Ω–µ –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –Ω–∞ `Map.tsx`/`Planner.tsx` —á—Ç–æ–±—ã –º–æ–∫–∏—Ä–æ–≤–∞—Ç—å facade –∏ assert: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—É–±–ª–∏—á–Ω—ã–π API —Ñ–∞—Å–∞–¥–∞, –∞ –Ω–µ `.getMap()`.
- Integration: –ø–æ–∫—Ä—ã—Ç—å `externalMarkers` flow, renderer pool –∏ event handler lifecycle.

---

## 6. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –ø–ª–∞–Ω (–ø–µ—Ä–µ–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω) üîß
1) P0 ‚Äî –ó–∞—â–∏—Ç–∞ –æ—Ç –æ–±—Ö–æ–¥–∞ —Ñ–∞—Å–∞–¥–∞ (lint + code‚Äëscan test) ‚Äî 1‚Äì2—á
   - –ü—Ä–∏—á–∏–Ω–∞: –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –Ω–æ–≤—ã–µ –æ–±—Ö–æ–¥—ã –∏ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç.
   - Acceptance: CI –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –ø—Ä—è–º–æ–º –¥–æ—Å—Ç—É–ø–µ –∫ `mapInstance`/`INTERNAL`/`leaflet` –≤–Ω–µ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤.

2) P0 ‚Äî –ó–∞–∫—Ä—ã—Ç—å API‚Äëgap `highlightEventOnMap` (facade ‚Üí renderer contract) ‚Äî 1‚Äì2—á
   - Acceptance: –≤—ã–∑–æ–≤ —Ñ–∞—Å–∞–¥–∞ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –≤–∏–∑—É–∞–ª—å–Ω–æ–º—É highlight –≤ —Ä–µ–Ω–¥–µ—Ä–µ—Ä–∞—Ö; unit —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç.

3) P1 ‚Äî –†–µ—Ñ–∞–∫—Ç–æ—Ä `mapUtils` / —É–¥–∞–ª–∏—Ç—å –ø—Ä–∏—ë–º—ã, –¥–æ–ø—É—Å–∫–∞—é—â–∏–µ –ø–µ—Ä–µ–¥–∞—á—É –∏–Ω—Å—Ç–∞–Ω—Å–∞ (–∑–∞–º–µ–Ω–∞ –Ω–∞ facade‚Äëonly) ‚Äî 2‚Äì3—á

4) P1 ‚Äî `externalMarkers` ‚Äî –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∏ –ø–æ–∫—Ä—ã—Ç—å race cases —Ç–µ—Å—Ç–∞–º–∏ ‚Äî 2‚Äì4—á

5) P1 ‚Äî Pooling/rendererMeta: –∑–∞–ø—Ä–µ—Ç–∏—Ç—å reuse –¥–ª—è –¥—Ä—É–≥–∏—Ö containerId, –æ—á–∏—Å—Ç–∫–∞ –ø—É–ª–∞ –Ω–∞ destroy ‚Äî 2‚Äì3—á

6) P2 ‚Äî –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π TRACKER_ROAD (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –≥–ª—É–±–æ–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–∫–µ—Ä–∞) ‚Äî –æ—Ü–µ–Ω–∫–∞ –æ—Ç–¥–µ–ª—å–Ω–æ.

---

## 7. –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤/CI (–∫–æ—Ä–æ—Ç–∫–∏–π –ø–ª–∞–Ω) ‚úÖ
- –î–æ–±–∞–≤–∏—Ç—å `frontend/tests/lint.mapFacade.bypass.test.ts` ‚Äî —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –∫–æ–¥ –∏ —Ñ–µ–π–ª–∏—Ç –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤.
- –î–æ–±–∞–≤–∏—Ç—å ESLint –ø—Ä–∞–≤–∏–ª–æ (custom) –∏–ª–∏ use regexp‚Äë–ø—Ä–∞–≤–∏–ª–æ –≤ CI step.
- –î–æ–±–∞–≤–∏—Ç—å unit tests –¥–ª—è `Map.tsx` –∏ `Planner.tsx` –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∫–∏—Ä—É—é—Ç `mapFacade` –∏ assert: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Ñ–∞—Å–∞–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `setView`, `highlightEventOnMap`, `addMarker`) ‚Äî –∞ –Ω–µ `getMap()`.

---

## 8. –†–∏—Å–∫–∏ –∏ –∑–∞–º–µ—á–∞–Ω–∏—è –ø–æ —Ç—Ä–µ–∫–µ—Ä–∞–º üö¶
- –†–∏—Å–∫ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ –ø—Ä–∏ —Ñ–∏–∫—Å–µ –æ–±—Ö–æ–¥–æ–≤ —Ñ–∞—Å–∞–¥–∞: –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –º–µ—Å—Ç–∞ —Å–µ–π—á–∞—Å –Ω–∞–ø—Ä—è–º—É—é –∏—Å–ø–æ–ª—å–∑—É—é—Ç `mapInstance`; —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç –Ω–µ–±–æ–ª—å—à–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ –∫–æ–¥–µ –∏ —Ç–µ—Å—Ç–∞—Ö.
- –ü–æ GPS/—Ç—Ä–µ–∫–∏–Ω–≥—É: –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ª–æ–≥–∏–∫–∞ –∑–∞–ø–∏—Å–∏ —Ç—Ä–µ–∫–æ–≤ (—Ç–æ—á–Ω–æ—Å—Ç—å, pause/resume, —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è) ‚Äî —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã–π –æ–±—ä—ë–º (TRACKER_ROAD). –°–µ–π—á–∞—Å –≤ —Ä–∞–º–∫–∞—Ö —Ñ–∞—Å–∞–¥–∞ –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø—É–±–ª–∏—á–Ω—ã–µ –≤—ã–∑–æ–≤—ã —Ç—Ä–µ–∫–∏–Ω–≥–∞ –∏–¥—É—Ç —á–µ—Ä–µ–∑ —Ñ–∞—Å–∞–¥ (—ç—Ç–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ).

---

## 9. –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–π —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥ (–±—ã—Å—Ç—Ä–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ) ‚ñ∂Ô∏è
1. –í–Ω–µ–¥—Ä–∏—Ç—å —Ç–µ—Å—Ç‚Äë—Å–∫–∞–Ω –∏ ESLint‚Äë–ø—Ä–∞–≤–∏–ª–æ –ø—Ä–æ—Ç–∏–≤ –æ–±—Ö–æ–¥–æ–≤ —Ñ–∞—Å–∞–¥–∞ (P0).  
2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å `highlightEventOnMap` (P0).  
3. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ ‚Äî –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π TRACKER_ROAD –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞—É–¥–∏—Ç–∞ GPS‚Äë–ª–æ–≥–∏–∫–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ).

---

## 10. –í–æ–ø—Ä–æ—Å—ã –∫ –≤–∞–º / –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ —à–∞–≥–∞
- –•–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã —è:  
  A) –î–æ–±–∞–≤–∏–ª CI —Ç–µ—Å—Ç/ESLint –ø—Ä–∞–≤–∏–ª–æ, –∑–∞–ø—Ä–µ—â–∞—é—â–∏–π –æ–±—Ö–æ–¥ —Ñ–∞—Å–∞–¥–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é –Ω–∞—á–∞—Ç—å —Å —ç—Ç–æ–≥–æ),  
  B) –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–ª –æ—Ç–¥–µ–ª—å–Ω—ã–π TRACKER_ROAD –ø–æ GPS‚Äë—Ç—Ä–µ–∫–µ—Ä–∞–º, –∏–ª–∏  
  C) –°—Ä–∞–∑—É —Å–¥–µ–ª–∞–ª –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ `highlightEventOnMap` –≤ —Ä–µ–Ω–¥–µ—Ä–µ—Ä–∞—Ö?

–û—Ç–≤–µ—Ç—å—Ç–µ –±—É–∫–≤–æ–π (A/B/C) ‚Äî –Ω–∞—á–Ω—É –ø–æ—Å–ª–µ –≤–∞—à–µ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.  

---

> –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –≤–Ω–µ—Å–µ–Ω—ã —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å–∞–º –æ—Ç—á—ë—Ç `FASADE_ROAD.md` ‚Äî –∫–æ–¥ –Ω–µ –º–µ–Ω—è–ª—Å—è.

