/* ========================================
   _MODES.CSS - Стили режимов
   ======================================== */

/* --- Default mode (обычный режим) --- */
.page-layout-container:not(.map-mode):not(.planner-mode):not(.chat-container) {
  padding: 28px;
}

.page-container:not(.map-mode):not(.planner-mode):not(.chat-container) {
  padding: 28px;
}

/* --- Chat mode --- */
.page-layout-container.chat-container,
.page-container.chat-container {
  padding: 32px 0;
}

/* --- Planner mode --- */
.page-layout-container.planner-mode,
.page-container.planner-mode {
  height: calc(100vh - 64px);
  min-height: calc(100vh - 64px);
  max-height: calc(100vh - 64px);
  display: flex;
  flex-direction: column;
  overflow: visible;
  background: var(--bg-page);
  padding: 0;
  margin: 0;
}

.page-container.planner-mode {
  padding: 0;
}

.page-main-area.planner-mode {
  height: calc(100vh - 64px - 60px);
  min-height: calc(100vh - 64px - 60px);
  max-height: calc(100vh - 64px - 60px);
  margin-bottom: 60px;
  background: transparent;
  padding: 0;
}

/* --- Map / Planner modes (минимальные правила) --- */
.page-container.map-mode,
.page-container.planner-mode {
  padding: 0; /* Zero padding — full-bleed content */
}

/* Facade map root fills viewport and respects topbar offset */
/* pointer-events: none — facade-контейнер пустой обёрткой,
   реальная карта и маркеры рендерятся в #global-map-root.
   Facade НЕ должен перехватывать клики/hover. */
.facade-map-root {
  position: fixed;
  top: var(--facade-map-top, 0px);
  left: 0;
  right: 0;
  bottom: 0;
  width: 100vw;
  height: calc(100vh - var(--facade-map-top, 0px));
  z-index: var(--z-map);
  pointer-events: auto;
  overflow: visible;
}

/* When a page is in map-mode or planner-mode, the container should be full viewport */
.page-layout-container.map-mode,
.page-layout-container.planner-mode {
  position: relative;
  width: 100%;
  height: 100vh;
}

/* Posts, activity and other panels are displayed above map using z-index */
.page-container.posts-mode .page-main-panel,
.page-container.activity-mode .page-main-panel,
.page-container.blog-page .page-main-panel {
  position: relative;
  z-index: var(--z-overlay);
  max-width: 100%;
}

.page-content-wrapper.map-mode {
  border-radius: 0;
  background: transparent;
  overflow: visible;
}

.page-main-panel.map-mode {
  border-radius: 0;
  background: transparent;
  overflow: visible;
}

/* --- Map-specific panels --- */
.page-left-panel.map-mode {
  padding: 0;
  margin: 0;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: transparent;
  backdrop-filter: none;
  border-radius: 0;
  box-shadow: none;
  overflow: visible;
  border: none;
  position: relative;
}

.page-right-panel.map-mode {
  border-radius: var(--radius-xl);
  background: var(--glass-bg-modal);
  backdrop-filter: var(--glass-blur-strong);
  box-shadow: var(--glass-shadow);
  overflow: visible;
  border: 1px solid var(--glass-border);
  position: relative;
}

/* --- Posts mode --- */
.page-container.posts-mode {
  background: var(--glass-bg-modal);
  backdrop-filter: var(--glass-blur-strong);
  border-radius: var(--glass-radius-lg);
  box-shadow: var(--glass-shadow);
  border: 1px solid var(--glass-border);
  overflow: visible;
}

/* --- Facade map mode --- */
.facade-map-root {
  overflow: visible;
}

/* Hover-эффект отключён — карта не должна сдвигаться при наведении */